<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./css/style.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" type="text/css" 
     href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
	
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"> </script>
  </head>
  <body>
    <div
      class="w-[1120px] h-[530px] bg-stone-800 shadow-xl relative overflow-hidden">
      <!-- run-right -->
      <div class="flex">
        <div class="box gotoX"></div>
      </div>
    </div>
    <div
      class="w-52 h-52 bg-gray-500 m-10 shadow-xl relative overflow-hidden rounded-lg">
      <div
        class="h-12 w-12 rounded-full bg-white hover:bg-green-200 group/item hover:shadow-xl transition-all duration-300 ease-in-out flex items-center absolute top-[5rem] left-4 cursor-pointer">
        <i
          class="fa-solid fa-angle-left text-[1.8rem] mx-auto text-neutral-600 group-hover/item:text-neutral-900 transition-all duration-300 ease-in-out"></i>
      </div>
      <div
        class="h-12 w-12 rounded-full bg-white flex hover:bg-green-200 items-center absolute top-[5rem] right-4 cursor-pointer group/item hover:shadow-xl transition-all duration-300 ease-in-out">
        <i
          class="fa-solid fa-angle-right text-[1.8rem] mx-auto text-neutral-600 group-hover/item:text-neutral-900 transition-all duration-300 ease-in-out"></i>
      </div>
      <div
        class="h-12 w-12 rounded-full bg-white flex hover:bg-green-200 items-center absolute top-4 left-[5rem] cursor-pointer group/item hover:shadow-xl transition-all duration-300 ease-in-out">
        <i
          class="fa-solid fa-angle-up text-[1.8rem] mx-auto text-neutral-600 group-hover/item:text-neutral-900 transition-all duration-300 ease-in-out"></i>
      </div>
      <div
        class="h-12 w-12 rounded-full bg-white flex hover:bg-green-200 items-center absolute left-[5rem] bottom-4 cursor-pointer group/item hover:shadow-xl transition-all duration-300 ease-in-out">
        <i
          class="fa-solid fa-angle-down text-[1.8rem] mx-auto text-neutral-600 group-hover/item:text-neutral-900 transition-all duration-300 ease-in-out"></i>
      </div>
    </div>
    <script>
    $(function(){
      handleControl();
      translateX();
      translateY();
    });



    const handleControl = () => {
      $(document).keydown(function(e) {
        var parent = $('.box');
        var style = parent.attr('style');
        var number = style.match(/\d+/g);
        var x = number[0];
        var y = number[1];
        if(e.keyCode == 38) {
          // up key
          toastr.success('up key');
        } else if(e.keyCode == 40) {
          // create new box
          var newBox = '<div class="box gotoY" style="transform: translate('+ x +'px,'+ y +'px)"></div>';
          parent.parent().html(newBox);
          console.log("down key",x,y);
          translateY(y);

          toastr.success('down key');

        } else if(e.keyCode == 37) {
          // left key
          
          toastr.success('left key');
        } else if(e.keyCode == 39) {
          // right key
          var newBox = '<div class="box gotoX" style="transform: translate('+ x +'px,'+ y +'px)"></div>';
          parent.parent().html(newBox);
          console.log("right key",x,y);
          translateX(x);
          toastr.success('right key');
        } else {
          toastr.error('Please press arrow key');
        }
        
      });
    };


    const translateX = (translateY = 0) => {
      console.log("translateY",translateY);
      var box = $('.gotoX');
      var countPx = 10;
      setInterval(function(){
        box.each(function(){
          $(this).css('transform', 'translate(' + countPx +'px,' + translateY + 'px)');
        });
        countPx += 10;
        if(countPx > 1120){
          countPx = -20;
        }
      }, 1000);
    };

    const translateY = (translateX = 0) => {
      console.log("translateX",translateX);
      var box = $('.gotoY');
      var countPx = 10;
      setInterval(function(){
        box.each(function(){
          $(this).css('transform', 'translate('+ translateX +'px,' + countPx +'px)');
        });
        countPx += 10;
        if(countPx > 530){
          countPx = -20;
        }
      }, 1000);
    };
  </script>
  </body>
</html>